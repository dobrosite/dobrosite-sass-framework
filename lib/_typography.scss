/**
 * Типографика.
 */

@import "settings";
@import "adaptive";
@import "grid";

/**
 * Возвращает мультипликатор размера заголовка.
 *
 * @param $level Уровень заголовка (1, 2, 3…).
 * @param $ratio Используемое отношение (см. $heading-ratio-…).
 */
@function heading-size-multiplier($level, $ratio)
{
    $result: 1;

    @for $i from 1 to 6 - $level {
        $result: $result * $ratio;
    }

    @return $result;
}

/**
 * Задаёт размер шрифта заголовка.
 *
 * @param $level Уровень заголовка (1, 2, 3…).
 */
@mixin heading-font-size($level)
{
    $step: $base-font-size / 2;

    $font-size: $heading-base-size * heading-size-multiplier($level, $heading-ratio-default);
    font-size: round($font-size);
    line-height: ceil($heading-base-height * $font-size / $step) * $step;

    @include for-phone-and-wider {
        $font-size: $heading-base-size * heading-size-multiplier($level, $heading-ratio-phone);
        font-size: round($font-size);
        line-height: ceil($heading-base-height * $font-size / $step) * $step;
    }

    @include for-tablet-portrait-and-wider {
        $font-size: $heading-base-size * heading-size-multiplier($level, $heading-ratio-tablet-portrait);
        font-size: round($font-size);
        line-height: ceil($heading-base-height * $font-size / $step) * $step;
    }

    @include for-tablet-landscape-and-wider {
        $font-size: $heading-base-size * heading-size-multiplier($level, $heading-ratio-tablet-landscape);
        font-size: round($font-size);
        line-height: ceil($heading-base-height * $font-size / $step) * $step;
    }

    @include for-desktop-and-wider {
        $font-size: $heading-base-size * heading-size-multiplier($level, $heading-ratio-desktop);
        font-size: round($font-size);
        line-height: ceil($heading-base-height * $font-size / $step) * $step;
    }

    @include for-wide-screens {
        $font-size: $heading-base-size * heading-size-multiplier($level, $heading-ratio-widescreen);
        font-size: round($font-size);
        line-height: ceil($heading-base-height * $font-size / $step) * $step;
    }
}

/**
 * Задаёт задаёт размеры внешних отступов заголовка.
 *
 * @param $level Уровень заголовка (1, 2, 3…).
 */
@mixin heading-margins($level)
{
    margin-bottom: grid-size((7 - $level) * $heading-margin-bottom-base * $heading-margin-bottom-ratio);
    margin-top: grid-size((7 - $level) * $heading-margin-top-base * $heading-margin-top-ratio);
}

h1 {
    @include heading-font-size(1);
    @include heading-margins(1);
}

h2 {
    @include heading-font-size(2);
    @include heading-margins(2);
}

h3 {
    @include heading-font-size(3);
    @include heading-margins(3);
}

h4 {
    @include heading-font-size(4);
    @include heading-margins(4);
}

h5 {
    @include heading-font-size(5);
    @include heading-margins(5);
}

h6 {
    @include heading-font-size(6);
    @include heading-margins(6);
}

p {
    font-size: $base-font-size;
    line-height: $base-line-height;
}